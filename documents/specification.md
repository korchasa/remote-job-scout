# Спецификация программного обеспечения (SRS)

## 1. Введение

- **Назначение документа:** Определение требований к системе поиска и обогащения
  удаленных вакансий с использованием LLM для анализа и фильтрации.
- **Область применения:** Веб-приложение для поиска и анализа удаленных вакансий
  для разработчиков.
- **Целевая аудитория:** Разработчики, ищущие удаленную работу, менеджеры
  проектов, технические директора.
- **Определения и сокращения:**
  - LLM: Large Language Model (Большая языковая модель)
  - API: Application Programming Interface
  - SQLite: Легковесная реляционная база данных
  - localStorage: Локальное хранилище браузера

## 2. Общее описание

- **Контекст системы:** Веб-приложение, предоставляющее персонализированный
  поиск удаленных вакансий с использованием искусственного интеллекта для
  анализа и обогащения данных. Система интегрируется с внешними API и работает
  автономно в браузере пользователя.
- **Предположения и ограничения:**
  - Доступ к интернету для поиска вакансий
  - Доступ к OpenAI API для обогащения данных
  - Современный веб-браузер с поддержкой localStorage
  - Ограничения на использование внешних API
- **Предположения:**
  - Пользователь имеет базовые навыки работы с веб-интерфейсами
  - Все источники вакансий доступны и стабильны

## 3. Функциональные требования

### 3.1 Требование FR-1: Настройки поиска

- **Описание:** Система должна предоставлять настройки поиска вакансий, хранимые
  локально.
- **Сценарий использования:** Пользователь хочет настроить поиск по конкретным
  критериям.
- **Критерии приемки:**
  1. Загрузка настроек из localStorage при запуске
  2. Сохранение изменений настроек в localStorage
  3. Использование настроек по умолчанию при первом запуске
  4. Настройка списка позиций для поиска
  5. Управление черными списками слов и компаний
  6. Выбор источников поиска (job-сайты + OpenAI WebSearch API)
  7. Настройка фильтров (языки, время работы, страны)
  8. Передача всех настроек одним запросом при запуске поиска

### 3.2 Требование FR-2: Многоэтапный процесс поиска

- **Описание:** Система должна выполнять поиск вакансий в несколько этапов с
  визуализацией прогресса.
- **Сценарий использования:** Пользователь запускает поиск и наблюдает за его
  выполнением.
- **Критерии приемки:**
  1. Запуск многоэтапного процесса поиска
  2. Отображение текущего этапа и прогресса в реальном времени
  3. Возможность остановки поиска на любом этапе
  4. Сохранение результатов при остановке
  5. Отображение итоговой статистики по завершении

### 3.3 Требование FR-3: Сбор данных вакансий (Этап 1)

- **Описание:** Система должна собирать вакансии с выбранных источников.
- **Сценарий использования:** Система собирает новые вакансии по
  пользовательским позициям.
- **Критерии приемки:**
  1. Использование только выбранных источников
  2. Применение пользовательских позиций для поиска
  3. Интеграция с OpenAI WebSearch API
  4. Поддержка глобального поиска
  5. Отображение прогресса по источникам
  6. Сохранение базовой информации вакансий
  7. Логирование ошибок

### 3.4 Требование FR-4: Предварительная фильтрация (Этап 2)

- **Описание:** Система должна фильтровать вакансии по пользовательским
  настройкам.
- **Сценарий использования:** Быстрая фильтрация вакансий перед LLM-обогащением.
- **Критерии приемки:**
  1. Автоматический переход к фильтрации после сбора
  2. Проверка по всем пользовательским настройкам
  3. Обновление статусов вакансий
  4. Отображение статистики фильтрации

### 3.5 Требование FR-5: LLM-обогащение данных (Этап 3)

- **Описание:** Система должна обогащать данные вакансий с помощью LLM.
- **Сценарий использования:** Обогащение оставшихся вакансий дополнительной
  информацией.
- **Критерии приемки:**
  1. Автоматический переход к обогащению после фильтрации
  2. Извлечение стандартной и дополнительной информации
  3. Исследование компаний через веб-поиск
  4. Сохранение источников информации
  5. Обработка отсутствующих данных

### 3.6 Требование FR-6: Управление вакансиями

- **Описание:** Система должна предоставлять инструменты управления найденными
  вакансиями.
- **Сценарий использования:** Пользователь просматривает и управляет
  результатами поиска.
- **Критерии приемки:**
  1. Просмотр полной информации о вакансиях
  2. Переход по ссылкам на оригинальные вакансии
  3. Перемещение вакансий в skip
  4. Добавление компаний в черный список

### 3.7 Требование FR-7: Система черного списка

- **Описание:** Система должна поддерживать черный список компаний.
- **Сценарий использования:** Пользователь хочет исключить определенные компании
  из поиска.
- **Критерии приемки:**
  1. Сохранение компаний в черном списке
  2. Автоматическая фильтрация по черному списку
  3. Управление черным списком через интерфейс

### 3.8 Требование FR-8: Мониторинг производительности

- **Описание:** Система должна отслеживать прогресс и затраты на LLM.
- **Сценарий использования:** Пользователь контролирует процесс поиска и бюджет.
- **Критерии приемки:**
  1. Отображение общего прогресса
  2. Расчет и отображение ETA
  3. Отслеживание затрат в реальном времени
  4. Прогнозирование полных затрат
  5. Сохранение метрик производительности

## 4. Нефункциональные требования

- **Производительность:**
  - Время отклика интерфейса < 1 секунды
  - Обработка 100 вакансий < 10 минут
  - Параллельная обработка запросов
- **Надежность:**
  - Graceful degradation при недоступности API
  - Восстановление после сбоев
  - Логирование всех операций
- **Безопасность:**
  - Валидация входных данных
  - Защита от SQL-инъекций
  - Безопасное хранение API ключей
- **Масштабируемость:**
  - Поддержка большого количества вакансий
  - Оптимизация запросов к базе данных
  - Асинхронная обработка
- **Удобство использования:**
  - Интуитивный веб-интерфейс
  - Отзывчивый дизайн
  - Поддержка темной темы

## 5. Интерфейсы

- **API и интеграции:**
  - OpenAI API для LLM-обработки
  - OpenAI WebSearch API для поиска вакансий
  - Job-сайты (LinkedIn, Indeed, Glassdoor, etc.)
  - Playwright MCP для автоматизации браузера
  - **JobSpy** как референсная имплементация для скрапинга вакансий (Python
    библиотека)
- **Протоколы и форматы данных:**
  - REST API для веб-интерфейса
  - JSON для обмена данными
  - WebSocket для обновления статуса
- **Ограничения UI/UX:**
  - Современный веб-интерфейс
  - Адаптивный дизайн
  - Поддержка клавиатурной навигации

### 5.1 Референсная имплементация JobSpy

Система должна учитывать опыт и архитектуру библиотеки **JobSpy**
(https://github.com/cullenwatson/JobSpy) как референсной имплементации для
скрапинга вакансий:

**Поддерживаемые источники:**

- LinkedIn, Indeed, Glassdoor, Google, ZipRecruiter, Bayt, Naukri, BDJobs

**Ключевые возможности для интеграции:**

- Конкурентный скрапинг с нескольких источников
- Поддержка прокси для обхода блокировок
- Гибкая фильтрация по параметрам (локация, тип работы, зарплата, дата
  публикации)
- Поддержка разных форматов описаний вакансий
- Rate limiting и обработка блокировок

**Архитектурные решения:**

- Модульная структура с отдельными скрейперами для каждого источника
- Единая точка входа для запуска поиска по нескольким источникам
- Обработка ошибок и повторные попытки
- Стандартизированный формат данных вакансий

## 6. Критерии приемки

Система считается принятой, если выполнены следующие условия:

1. Все функциональные требования реализованы и протестированы
2. Нефункциональные требования соответствуют заданным параметрам
3. Веб-интерфейс работает во всех современных браузерах
4. Система проходит нагрузочное тестирование
5. Документация соответствует требованиям
6. Код проходит все проверки качества
